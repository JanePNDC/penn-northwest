<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="css/adminIndex.css" />
<section
  class="row gx-5 mx-0 mx-lg-5 overflow-y-auto no-scrollbar min-height-100-vh pb-5"
>
  <section class="bg-light rounded px-0">
    <!--* Begin Intrapage navbar -->
    <nav class="navbar navbar-expand-lg bg-body-secondary">
      <div class="container-fluid">
        <!-- <p class="navbar-brand">Test</p> -->
        <a class="navbar-brand" href="#">Admin Panel</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#adminNavbarNav"
          aria-controls="adminNavbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="adminNavbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <button class="nav-link btn btn-light adminNavButton membership active">
                Membership Applications
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link btn btn-light adminNavButton">
                Events
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link btn btn-light adminNavButton">
                Members
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link btn btn-light adminNavButton">
                Site Users
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Nav ================================================================================-->

    <!--! Notes: -->
    <!-- We'll code each of the thing the admin should be able to see here, rendering dynamically in EJS -->
    <!-- Everything will be hidden via CSS with the d-none class or some such -->
    <!-- When a user clicks on one of the above nav buttons, it will remove the class -->
    <!-- When another button is clicked, the class will be readded, and removed from the relevant button/section clicked, etc -->

    <!-- Other option is to generate the html dynamically with JS -->
    <!-- This may not work with the dynamic data calls and the serverside data generation, etc -->
    <!-- Will probably be more work too... -->

    <!--? Membership Applications -->
    <section class="data-sections membership">
      <% if (!data.applications) {%>

        <h1 class="display-2">Database Lookup Failed</h1>

      <% } else if (data.applications.length === 0) { %>

        <h1 class="display-2">There are currently no applications</h1>

      <% } else { %>
        <h1 class="display-2 m-3 mb-5 text-decoration-underline">Applications:</h1>
        <div class="container d-flex justify-content-evenly flex-wrap">

        

      <!-- Displays Applications -->
        <% for (let app of data.applications) { %>
          <div class="card mb-5" style="width: 18rem;">
  
            <div class="card-body">
              <h5 class="card-title"><strong><%= app.companyName %></strong></h5>
              <p class="card-text"><%= app.descriptionOfBusiness %></p>
              <p class="card-text"><strong>Affiliations:</strong> <%= app.affiliations %></p>
              <p class="card-text"><strong>Rep:</strong> <%= app.representative %></p>
              <p class="card-text"><%= app.address %>, <%= app.city %>, <%= app.state %> <%= app.zip %></p>

            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><%= app.email %></li>
              <li class="list-group-item"><%= app.phone %></li>
              <li class="list-group-item"><%= app.companyType %></li>
              <li class="list-group-item"><%= app.annualContribution %> yearly pledge.</li>
              <li class="list-group-item"><a href="<%= app.website %>" class="card-link text-decoration-underline"><%= app.website %></a></li>
            </ul>
            <!-- <div class="card-body">
              <a href="<%= app.website %>" class="card-link text-decoration-underline"><%= app.website %></a>
            </div> -->
            <div class="card-footer text-body-secondary">
                Submitted <%= app.formattedDate %> by <%= app.submittedBy %>, <%= app.submitterTitle %>
                <hr />
                <div class="mb-1">
                  <form class="delete-document-form" action="/membership/application/<%= app.id %>?_method=DELETE" method="post">
                    <button class="btn btn-danger delete-document-button" type="submit">Delete</button>
                  </form>
                </div>
            </div>

          </div>
          
          <% } %> 
        </div>
       
      <% } %>
    </section>
  </section>
</section>

<script src="js/admin/adminIndex.js"></script>
<script src="js/deleteDocumentConfirmation.js"></script>